(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Acox:function(e,t,n){"use strict";n.r(t);var o=n("pVnL"),i=n.n(o),s=n("gcR/"),r=n.n(s),a=n("lSNA"),l=n.n(a),d=(n("3bBZ"),n("q1tI")),c=n.n(d),h=n("ikHm"),u=n("y6Dp"),p=n("mF3+"),m=n("wpmu"),b=n("G4cA"),g=n("g4rC"),v=n("6WtK"),S=n("i3uR"),y=n("wldR"),f=n("LUuO"),k=n("wZk+"),M=n("stZG"),w=n("MvRd"),T=n("C7oc"),C=n("nM47"),I=n("FcJC"),B=n("6rsX"),P=n("TmDR"),A=n("uUOz"),x=n("Wae9"),R=n("MeYt"),O=n("7M94"),F=n("AXh+"),j=n("d9nj"),D=n("ETM2"),N=n("4aFz"),q=n("QcDD"),L=n("sdlW"),V=n("Sb6f"),U=n("G414"),W=n("Oy36"),_=n("OxuQ"),E=n("HSWF"),z=n("id5p"),G=n("zmp8"),Q=n("H4VD"),H=n("/0g+"),Z=n("MBf9"),J=n("h5Kq"),X=n("HRSx"),K=n("ov3o"),Y=n("58VE"),$=n("HTHG"),ee=n("UcZb"),te=n("Rtjx"),ne=n("JBsN"),oe=n("J9+s"),ie=n("Hq/H"),se=n("wS9/"),re=n("qX+M"),ae=n("bLTx"),le=n("gHFd"),de=n("DNgp"),ce=n("unoy"),he=n("heK1"),ue=n("w5u6");class pe extends y.a{constructor(...e){super(...e),l()(this,"storeTypes",{shareButtonPopupStore:g.a}),l()(this,"handleOpenQuickFind",()=>{N.b({environment:this.environment,analyticsFrom:"public-page-topbar"})}),l()(this,"handleShareClick",()=>{u.rd(this.environment),C.e(this.environment)}),l()(this,"handleTopbarClick",()=>{B.e(this.environment)}),l()(this,"navigateToFirstSpace",()=>{const{currentUserRootStore:e,currentUserSettingsStore:t}=q.default.state;e&&t&&L.o({environment:this.environment,userRootStore:e,userSettingsStore:t})}),l()(this,"handleMoveToClick",e=>{U.d({blocks:[this.props.store],analyticsFrom:"quick_add",onAccept:this.handleMoveToAccept,isAddTo:!0})}),l()(this,"handleMoveToAccept",e=>{const{currentSpaceStore:t}=q.default.state;t&&this.props.saveParent&&E.A({currentUserId:this.environment.currentUser.id,spaceId:t.id,value:e}),u.Fc(this.environment)}),l()(this,"handleCancelQuickAdd",e=>{const t=q.default.state.currentBlockStore,n=K.a.state.lastPageId;t&&n&&(Q.navigateToBlock({environment:this.environment,store:m.a.createChildStore(t,{table:X.a,id:n}),showMoveTo:!1,saveParent:!1}),Z.createAndCommit(this.environment,e=>{H.b({environment:this.environment,blocks:[t],transaction:e})}))})}renderComponent(){const{store:e}=this.props,{WindowSizeStore:t,device:n}=this.environment,o=Object(F.g)(this.environment,this.props.store);return r()(M.a,{capture:!0,render:s=>c.a.createElement("div",i()({},s,{style:this.getWrapStyle()}),o?this.renderPublicPageTopbar():this.renderNormalTopbar(),e.canEdit()&&n.isPhone&&r()(P.a,{store:this.props.store,isMobile:!0},this.props.store.id),this.props.isOffline&&r()(J.b,{type:J.a.White,isMobile:!0},void 0,r()("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingLeft:t.getSafePaddingLeftCSS(10),paddingRight:t.getSafePaddingRightCSS(14)}},void 0,p.a.mobileOffline({width:26,marginRight:12}),r()("div",{},void 0,r()(oe.FormattedMessage,{defaultMessage:"You're offline",id:"topbarMobile.offline.message"})))),r()(f.a,{banners:this.props.banners,isMobile:!0}))})}renderPublicPageTopbar(){const{store:e}=this.props;return r()("div",{onClick:this.handleTopbarClick,style:this.getStyle(),className:O.Pb},void 0,this.environment.currentUser.isLoggedIn()&&r()(d.Fragment,{},void 0,r()(R.a,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:V.a.fontWeight.medium,color:this.theme.regularTextColor},mobileFeedback:!0,onClick:this.navigateToFirstSpace},void 0,r()(oe.FormattedMessage,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})),r()("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:this.theme.darkDividerColor}})),r()(v.a,{store:this.props.store,style:this.getBreadcrumbsStyle(),maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),r()("div",{style:{flexGrow:1,flexShrink:1}}),r()(j.a,{onClick:this.handleOpenQuickFind},void 0,p.a.searchThick({width:20,height:20})),r()(D.a,{store:e,buttonPopupStore:A.a}))}renderNormalTopbar(){const{store:e,pageVisitStore:t,presenceStore:n}=this.props,{isTablet:o}=this.environment.device,i=this.props.isInvalidPage;return r()("div",{onClick:this.handleTopbarClick,style:this.getStyle(),className:O.Pb},void 0,this.renderHamburgerButton(),o&&r()(ie.a,{}),!i&&this.renderBreadcrumbs(),e.canEdit()&&o&&r()(P.a,{store:e,isMobile:!1},e.id),r()(w.a,{}),e.isRestricted()&&r()(ae.a,{style:{marginRight:8},onClick:()=>{this.stores.shareButtonPopupStore.setState({open:!0})}}),o&&e.canEdit()&&t&&n&&r()(ne.a,{rootStore:e,pageVisitStore:t,presenceStore:n}),this.props.shouldShowMoveTo?this.renderCancelQuickAdd():this.renderRightButtons())}renderHamburgerButton(){const e=x.a.getUnreadMentionsCountForOtherSpaces();return r()(R.a,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{if(Object(te.a)(this.environment))I.setExpand({environment:this.environment,isExpanded:!ee.a.get()});else{const{NativeMobileActionBarStore:e}=this.environment,t=e?e.state.menuType:null;"editing"===de.default.state.mode||null!==t?(ce.f(this.environment),null==e||e.clear(!1),he.b.onHide(()=>{ue.default.afterNextFlush(()=>I.open())})):I.open()}u.ld(this.environment)}},void 0,p.a.hamburgerMenu({width:18,height:18}),r()(T.a,{color:T.a.Color.Red,count:e,style:{position:"absolute",top:9,right:1}}))}renderBreadcrumbs(){const{isTablet:e}=this.environment.device;return this.props.shouldShowMoveTo?this.renderMoveTo():r()(v.a,{store:this.props.store,style:this.getBreadcrumbsStyle(),maxAncestorCount:e?2:1,showCurrentPageControls:!1,ancestorMaxWidth:e?160:100,currentPageMaxWidth:e?240:220,isMobile:!0})}renderMoveTo(){const{store:e}=this.props,t=e.getParentStore(),{currentSpaceStore:n}=q.default.state,o=t instanceof b.a&&n&&t.id===n.id;if(t){if(o)return r()(R.a,{mobileFeedback:!0,style:pe.moveToButtonStyle,onClick:this.handleMoveToClick},void 0,r()(oe.FormattedMessage,{defaultMessage:"<mediumcolor>Add to</mediumcolor>{userAvatar}<mediumweight>Private pages</mediumweight>",id:"topbarMobile.addToPrivateSectionButton.label",values:{mediumcolor:(...e)=>r()("span",{style:{color:this.theme.mediumTextColor,marginRight:8}},void 0,e),mediumweight:(...e)=>r()("span",{style:{fontWeight:V.a.fontWeight.medium,marginLeft:4}},void 0,e),userAvatar:r()(Y.a,{size:22,avatarShouldShowShadow:!0,userValue:Object($.h)(this.environment)})}}),this.renderChevron());{const n=e instanceof b.a?Object(re.getSpaceIcon)(this.environment,e):e.getIcon();return r()(R.a,{mobileFeedback:!0,style:pe.moveToButtonStyle,onClick:this.handleMoveToClick},void 0,r()("span",{style:{color:this.theme.mediumTextColor}},void 0,r()(oe.FormattedMessage,{defaultMessage:"Add to",id:"topbarMobile.addToPageOrWorkspaceSectionButton.label",description:"Displayed to the user in front of a page or space, like 'Add to Page', where 'Page' is an existing page."})," "),r()(W.a,{disabled:!0,icon:n,isEmptyPage:t.table===X.a&&t.isEmptyPage(),title:t instanceof b.a?Object(re.getSpaceName)(this.environment,t):void 0,size:24,style:{marginLeft:8,marginRight:4}}),r()(_.a,{style:{fontWeight:V.a.fontWeight.semibold},store:t}),this.renderChevron())}}}renderChevron(){return p.a.chevronDown({marginLeft:4,width:10,fill:this.theme.lightTextColor})}renderRightButtons(){const{device:e}=this.environment;if(!this.props.isInvalidPage)return e.isMobileNative?r()(d.Fragment,{},void 0,this.renderShare(),this.renderShowMore()):r()(d.Fragment,{},void 0,this.renderShowMore(),this.renderShare(),this.renderUpdatesButton())}renderCancelQuickAdd(){return r()(R.a,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:16,paddingRight:16,fontWeight:V.a.fontWeight.medium,color:G.g.blue},onClick:this.handleCancelQuickAdd},void 0,r()(oe.FormattedMessage,{defaultMessage:"Cancel",id:"topbarMobile.cancelQuickAddButton.label"}))}renderShowMore(){return r()(k.a,{store:this.props.store,collectionViewStore:this.props.collectionViewStore,buttonPopupStore:A.a})}renderShare(){const{device:e}=this.environment;return r()(S.a,{popupType:e.isMobile?S.a.PopupType.SlideUp:S.a.PopupType.Popup,style:{width:460},buttonPopupStore:this.stores.shareButtonPopupStore,onClick:this.handleShareClick,renderOrigin:t=>c.a.createElement(R.a,i()({mobileFeedback:!0,style:pe.actionButtonStyle},t),e.isAndroid?p.a.androidShare({width:16,height:16}):p.a.iOSShare({width:26})),render:()=>r()(le.LazyBlockPermissionsSettings,{buttonPopupStore:this.stores.shareButtonPopupStore,store:this.props.store,onClose:()=>{this.stores.shareButtonPopupStore.setState({...this.stores.shareButtonPopupStore.state,open:!1})}})})}renderUpdatesButton(){return r()(z.a,{format:z.a.Format.TopbarMobile})}getWrapStyle(){return{width:"100%",maxWidth:"100vw",zIndex:h.v}}getStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100vw",height:se.b,marginTop:e.state.paddingTopCSS,paddingLeft:e.getSafePaddingLeftCSS(0),paddingRight:this.props.shouldShowMoveTo?e.getSafePaddingRightCSS(0):e.getSafePaddingRightCSS(7),boxShadow:"0 1px 0 ".concat(this.theme.darkDividerColor),background:this.theme.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}getBreadcrumbsStyle(){const{isTablet:e}=this.environment.device;return{flexGrow:0,marginLeft:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:e?16:8,height:"100%"}}}l()(pe,"actionButtonStyle",{display:"flex",alignItems:"center",height:"100%",paddingLeft:6,paddingRight:6}),l()(pe,"moveToButtonStyle",{display:"flex",alignItems:"center",paddingLeft:8,paddingRight:12,fontSize:V.a.fontSize.UIRegular.mobile,lineHeight:V.a.lineHeight.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0}),t.default=pe},HTFi:function(e,t,n){"use strict";var o=n("LqYT"),i=n("heK1"),s=n("5qTp");t.a=new o.a(()=>{const{phase:e}=i.b.state;if(s.default.state.open)return!0;return e===i.a.hidden||e===i.a.willHide})},OeJx:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("lSNA"),r=n.n(s),a=(n("3bBZ"),n("q1tI")),l=n.n(a),d=n("yNyh"),c=n("G4GV"),h=n("wldR"),u=n("mF3+"),p=n("6rsX"),m=n("unoy"),b=n("D8Ld"),g=n("stZG"),v=n("rGsA"),S=n("J9+s");class y extends h.a{constructor(...e){super(...e),r()(this,"storeTypes",{store:c.a}),r()(this,"handleFocused",()=>{p.e(this.environment),m.f(this.environment),this.stores.store.setState({...this.stores.store.state,focus:!0})}),r()(this,"handleBlurred",()=>{this.stores.store.setState({...this.stores.store.state,focus:!1})}),r()(this,"handleSearchQueryChange",e=>{this.props.onChange({searchQuery:e.target.value})})}renderComponent(){const{searchQuery:e,intl:t}=this.props,{focus:n}=this.stores.store.state;return i()(b.a,{capture:n},void 0,i()(g.a,{capture:!0,render:o=>l.a.createElement("div",o,i()(d.b,{style:this.getStyle(),format:d.a.Transparent,value:e,placeholder:t.formatMessage({defaultMessage:"Type to searchâ€¦",id:"database.mobileSearch.placeholder"}),onChange:this.handleSearchQueryChange,autoComplete:"on",autoCorrect:"on",onFocus:this.handleFocused,onBlur:this.handleBlurred,showClearButton:!0,left:u.a.searchThick(this.getSearchIconStyle())}),i()(v.a,{show:n}))}))}getStyle(){return{boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,flexGrow:0,flexShrink:0,height:32,paddingLeft:8,paddingRight:12,borderRadius:3,fontSize:14,marginBottom:4}}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}}t.default=Object(S.injectIntl)(y)},QvPY:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("lSNA"),r=n.n(s),a=(n("3bBZ"),n("q1tI")),l=n.n(a),d=n("wldR"),c=n("QtqF"),h=n("4aFz"),u=n("8fuX"),p=n("UJva"),m=n("OIKt"),b=n("b936"),g=n("zK7c"),v=n("X6Ne"),S=n("pVnL"),y=n.n(S),f=n("i3uR"),k=n("5XPD"),M=n("Na01"),w=n("mF3+"),T=n("gbGO"),C=n("ohKz"),I=n("MeYt"),B=n("ty0h"),P=n("ibYI"),A=n("vJXr"),x=n("2A6Q"),R=n("pqiZ"),O=n("aEEb"),F=n("VoJ/"),j=n("CSYU"),D=n("wlCD"),N=n("QcDD"),q=n("qKs6"),L=n("J9+s"),V=n("r8MX"),U=n("Cycz"),W=n("2ZkR"),_=n("8Gp+"),E=n("rQb/"),z=n("IoOo");class G extends d.a{constructor(...e){super(...e),r()(this,"storeTypes",{passwordRequestStore:j.a}),r()(this,"handleClose",()=>{C.a.setState({open:!1})}),r()(this,"handleStartOfWeekToggle",()=>{1===this.getStartDayOfWeek()?Object(q.e)(this.environment):Object(q.d)(this.environment)})}renderComponent(){const{device:e}=this.environment,{data:t}=V.default.state,n=C.a.state.open,o="on"===W.default.getGroup(this.environment,"user-data-consent"),s=e.isIOS&&U.y(t);return i()(f.a,{popupType:e.isMobile?f.a.PopupType.SlideUp:f.a.PopupType.Popup,buttonPopupStore:C.a,renderOrigin:e=>l.a.createElement(I.a,y()({mobileFeedback:this.props.isMobile},e),i()(M.a,{left:this.renderIcon(),style:{background:n?this.theme.buttonHoveredBackground:"none"},isMobile:this.props.isMobile,disableMobileBorder:!0},void 0,i()(L.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"}))),render:()=>{let n;if(n=e.isMobile?{menuType:T.b.MenuType.Modal,title:i()(L.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:i()(L.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,whiteBackground:!0}:{menuType:T.b.MenuType.Popup},A.a.state.online){const{passwordRequestStore:e}=this.stores;return l.a.createElement(T.b,n,e.state.loading?i()(D.a,{style:{margin:"50% auto"}}):i()(x.a,{},void 0,i()(k.a,{}),i()(R.a,{size:48,isHidden:!0}),i()(E.a,{divider:"full"},void 0,i()(L.FormattedMessage,{id:"notificationSettingsButton.generalSection.title",defaultMessage:"General"})),i()(F.a,{requestStore:e,isEducationPlan:U.x(t)}),this.renderAppearanceSettings(),s&&this.renderSubscriptionSettings(),o&&this.renderUserDataConsentSettings(),i()(R.a,{size:32}),i()(P.a,{onClick:this.handleStartOfWeekToggle,startDayOfWeek:this.getStartDayOfWeek()||0})))}return i()(x.a,{},void 0,i()(O.a,{isSmall:!0,style:{textAlign:"center"}},void 0,i()(L.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})))}})}renderUserDataConsentSettings(){return i()(l.a.Fragment,{},void 0,i()(R.a,{size:32}),i()(_.a,{}))}renderAppearanceSettings(){return i()(l.a.Fragment,{},void 0,i()(R.a,{size:32}),i()(B.a,{}))}renderSubscriptionSettings(){return i()(l.a.Fragment,{},void 0,i()(R.a,{size:32}),i()(z.a,{}))}renderIcon(){return w.a.sidebarSettings({fill:this.theme.mediumIconColor,width:16})}getStartDayOfWeek(){const{currentUserSettingsStore:e}=N.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}}var Q=G,H=n("5ma9"),Z=n("y6Dp");class J extends d.a{renderComponent(){const e=i()(L.FormattedMessage,{defaultMessage:"Upgrade to Pro",id:"upgradeMobileButton.upgradeButton.label"});return i()(I.a,{mobileFeedback:!0,onClick:this.showUpgradeModal(this.environment)},void 0,i()(M.a,{left:this.renderIcon(),isMobile:!0,disableMobileBorder:!0},void 0,e))}renderIcon(){return w.a.settingsUpgradeFilled({fill:this.theme.mediumIconColor,width:16})}showUpgradeModal(e){return()=>{Object(Z.K)(e,{from:"mobile_sidebar",for_subscription_tier:"personal"});const{mobileNative:t}=e;t&&t.openUpgradeModal(Object(H.a)())}}}var X=J,K=n("g4rC"),Y=n("3wHm");class $ extends d.a{constructor(...e){super(...e),r()(this,"storeTypes",{buttonPopupStore:K.a}),r()(this,"handleClose",()=>{this.stores.buttonPopupStore.setState({open:!1})})}renderComponent(){if(!U.O(this.environment))return;const{store:e}=this.props,{buttonPopupStore:t}=this.stores;return i()(f.a,{buttonPopupStore:t,popupType:f.a.PopupType.SlideUp,renderOrigin:e=>l.a.createElement(I.a,y()({mobileFeedback:!0},e),i()(M.a,{left:this.renderIcon(),isMobile:!0,disableMobileBorder:!0},void 0,i()(L.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"}))),render:()=>{if(A.a.state.online){const t={menuType:T.b.MenuType.Modal,title:i()(L.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:i()(L.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose};return l.a.createElement(T.b,t,i()(Y.a,{store:e,isMobile:!0}))}this.renderOffline()}})}renderIcon(){return w.a.teamSize({fill:this.theme.mediumIconColor,width:16})}renderOffline(){return i()(x.a,{},void 0,i()(O.a,{isSmall:!0,style:{textAlign:"center"}},void 0,i()(L.FormattedMessage,{defaultMessage:"Please go online to manage members.",id:"memberSettingsButton.goOnline.prompt"})))}}var ee=$,te=n("FcJC"),ne=n("VyA+"),oe=n("yjqD"),ie=n("6rsX"),se=n("UcZb"),re=n("0zNc"),ae=n("84+D"),le=n("7M94"),de=n("Rtjx");class ce extends d.a{constructor(...e){super(...e),r()(this,"handleTouchStart",e=>{const t={x:e.touches[0].clientX,y:e.touches[0].clientY};se.c.state?t.x>Object(de.d)(this.environment)?ae.a.setState({touching:!0,swiping:!1,start:t}):this.handleReset():Object(de.i)(this.environment)&&t.x<100?ae.a.setState({touching:!0,swiping:!1,start:t}):this.handleReset()}),r()(this,"handleTouchMove",e=>{if(re.a.state.isDragging)return void this.handleReset();const t=ae.a.state;if(!t.touching)return;const n={x:e.touches[0].clientX,y:e.touches[0].clientY};if(t.swiping)ae.a.setState({touching:!0,swiping:!0,start:t.start,speed:se.c.state?t.end.x-n.x:n.x-t.end.x,end:n});else{if(Math.abs(n.y-t.start.y)>=25)return void this.handleReset();(!se.c.state&&n.x-t.start.x>25||se.c.state&&t.start.x-n.x>25)&&ae.a.setState({touching:!0,swiping:!0,start:t.start,speed:0,end:n})}this.updateTransform()}),r()(this,"handleTouchEnd",async()=>{const{ThemeStore:e}=this.environment,t=ae.a.state;if(!t.swiping)return;const n=Object(de.d)(this.environment),o=document.querySelector(Object(de.i)(this.environment)?".".concat(le.Bb):".".concat(le.C)),i=document.querySelector(".".concat(le.C)),s=Math.abs(t.speed)>=8,r=s?"ease-out":"ease-in-out",a="dark"===e.state.mode?", 1px 0 0 ".concat(this.theme.shadowColor.alpha(2*this.theme.shadowOpacity).css()):"",l="\n\t\t\t".concat(this.theme.mediumBoxShadow,"\n\t\t\t").concat(a,"\n\t\t");if(se.c.state){const e=t.start.x-t.end.x;if(e+25*t.speed>n/2){let t=s?(n-e)/n*200:200;t=Math.max(t,1),o.style.transition="transform ".concat(t,"ms ").concat(r),o.style.transform="translateZ(0)translateX(0px)",Object(de.i)(this.environment)&&(o.style.boxShadow=l,i.style.transition="filter ".concat(t,"ms ").concat(r),i.style.filter="brightness(1)"),await ue(o),te.close(),this.handleReset()}else o.style.transition="transform ".concat(200,"ms ").concat(r),o.style.transform="translateZ(0)translateX(".concat(n,"px)"),Object(de.i)(this.environment)&&(o.style.boxShadow=l,i.style.transition="filter ".concat(200,"ms ").concat(r),i.style.filter="brightness(0.7)"),await ue(o),this.handleReset()}else{const e=t.end.x-t.start.x;if(e+25*t.speed>n/2){let t=s?(n-e)/n*200:200;t=Math.max(t,1),o.style.transition="transform ".concat(t,"ms ").concat(r),o.style.transform="translateZ(0)translateX(".concat(n,"px)"),Object(de.i)(this.environment)&&(o.style.boxShadow=l,i.style.transition="filter ".concat(t,"ms ").concat(r),i.style.filter="brightness(0.7)"),await ue(o),te.open(),this.handleReset()}else o.style.transition="transform ".concat(200,"ms ").concat(r),o.style.transform="translateZ(0)translateX(0px)",Object(de.i)(this.environment)&&(o.style.boxShadow=l,i.style.transition="filter ".concat(200,"ms ").concat(r),i.style.filter="brightness(1)"),await ue(o),this.handleReset()}}),r()(this,"handleSidebarToggle",()=>{this.updateTransform()}),r()(this,"updateTransform",()=>{const e=document.querySelector(Object(de.i)(this.environment)?".".concat(le.Bb):".".concat(le.C)),t=document.querySelector(".".concat(le.C)),n=Object(de.d)(this.environment),o=ae.a.state;if(o.swiping)if(se.c.state){const i=n-(o.start.x-o.end.x)+25,s=Math.min(Math.max(0,i),n);if(e.style.transition="none",e.style.transform="translateZ(0)translateX(".concat(s,"px)"),Object(de.i)(this.environment)){e.style.boxShadow=this.theme.mediumBoxShadow,t.style.transition="none";const o=(1-.3*s/n).toString();t.style.filter="brightness(".concat(o,")")}}else{const i=o.end.x-o.start.x-25,s=Math.min(Math.max(0,i),n);if(e.style.transition="none",e.style.transform="translateZ(0)translateX(".concat(s,"px)"),Object(de.i)(this.environment)){e.style.boxShadow=this.theme.mediumBoxShadow,t.style.transition="none";const o=(1-.3*s/n).toString();t.style.filter="brightness(".concat(o,")")}}else se.c.state?(e.style.transition="transform 200ms",e.style.transform="translateZ(0)translateX(".concat(n,"px)"),Object(de.i)(this.environment)&&(e.style.transform="translateZ(0)translateX(calc(".concat(n,"px - 1px))"),e.style.boxShadow=this.theme.mediumBoxShadow,t.style.transition="filter 200ms",t.style.filter="brightness(0.7)"),ie.e(this.environment)):(e.style.transition="transform 200ms",e.style.transform="translateZ(0)translateX(0)",Object(de.i)(this.environment)&&(e.style.boxShadow="none",t.style.transition="filter 200ms",t.style.filter="brightness(1)"))})}didMount(){const{device:e}=this.environment;e.isMobile&&(window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchend",this.handleTouchEnd),se.c.addListener(this.handleSidebarToggle))}willUnmount(){const{device:e}=this.environment;e.isMobile&&(window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),se.c.removeListener(this.handleSidebarToggle))}handleReset(){ae.a.reset(),this.updateTransform()}}var he=ce;async function ue(e){const t=oe.c();e.addEventListener("transitionend",t.resolve),e.addEventListener("webkitTransitionEnd",t.resolve),await t.promise,e.removeEventListener("transitionend",t.resolve),e.removeEventListener("webkitTransitionEnd",t.resolve)}var pe=n("GRWW"),me=n("p0Uu"),be=n("zmp8"),ge=n("HTHG"),ve=n("NOLh"),Se=n("wS9/"),ye=n("ij+4"),fe=n("jzfh"),ke=n("1G+a"),Me=n("A9TN"),we=n("sdlW");class Te extends d.a{constructor(...e){super(...e),r()(this,"sidebarState",this.createComputedStore(()=>Object(ge.j)(this.environment))),r()(this,"storeTypes",{scrollerStore:pe.a}),r()(this,"handleScrollerMount",e=>{me.a.SidebarMobileScroller=e}),r()(this,"handleCloseSidebar",()=>{te.close()}),r()(this,"handleClickFind",()=>h.c({environment:this.environment,analyticsFrom:"sidebar-mobile"})),r()(this,"handleOrientationChange",()=>{te.close()}),r()(this,"isScrolledToTop",this.createComputedStore(()=>0===this.stores.scrollerStore.state.scrollTop)),r()(this,"isCurrentIAPSubscriber",()=>{const{currentUserRootStore:e}=N.default.state,t=Object(U.b)({environment:this.environment,userRootStore:e});return!(!t||!t.includes(Me.default.revenueCat.productIDs.personal.monthly)&&!t.includes(Me.default.revenueCat.productIDs.personal.yearly))})}willMount(){window.addEventListener("resize",this.handleOrientationChange)}willUnmount(){window.removeEventListener("resize",this.handleOrientationChange)}renderComponent(){const e=de.a(this.environment);return e?i()(ve.a,{render:()=>i()("div",{className:le.Bb,style:this.getWrapStyle()},void 0,!e&&i()(he,{}),this.renderSidebar()),isVisible:!0,animationStyle:{width:e?de.b(this.environment):"100vw"}}):i()("div",{className:le.Bb,style:{...this.getWrapStyle(),width:"100vw"}},void 0,!e&&i()(he,{}),this.renderSidebar())}renderSidebar(){return i()(ne.a,{capture:!de.a(this.environment)&&se.c.get(),onBackButton:this.handleCloseSidebar},void 0,i()("div",{style:this.getStyle()},void 0,this.renderTopbar(),this.renderOutliner()))}renderTopbar(){const{device:e}=this.environment,t=e.isMobileNative&&e.isTablet&&de.a(this.environment);return i()("div",{style:this.getTopbarStyle()},void 0,i()(ye.c,{shouldShowUnexpandButton:t,format:ye.a.Mobile,onSpaceClick:async({event:e,spaceViewStore:t})=>{await we.p({environment:this.environment,spaceViewStore:t,userSettingsStore:N.default.state.currentUserSettingsStore,userRootStore:N.default.state.currentUserRootStore,metaClick:e.ctrlKey||e.metaKey})}}),!e.isMobileNative&&i()(I.a,{onClick:this.handleClickFind,mobileFeedback:!0,style:Te.actionButtonStyle},void 0,w.a.mobileBottomBarSearch({width:26})))}renderOutliner(){const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserRootStore:n,currentUserStore:o,currentUserSettingsStore:s,currentBlockStore:r}=N.default.state,a=this.sidebarState.state;if(!(a&&r&&t&&n&&e&&o&&s))return;const d=e.canEdit(),h=Object(ke.b)({environment:this.environment})&&"personal_free"===Object(U.h)(this.environment)&&V.default.state.data&&"unsubscribed_admin"===V.default.state.data.type&&V.default.state.data.revenueCatEnabled&&!this.isCurrentIAPSubscriber();return i()(g.a,{store:e,disableEditNearestBlock:!0,render:n=>l.a.createElement(u.b,{store:this.stores.scrollerStore,ref:this.handleScrollerMount,style:Te.outlinerStyle,disableScroll:v.e(this.environment),type:u.a.Y},a.showBookmarksSection&&i()(m.a,{isMobile:!0,type:"bookmarks",spaceStore:e,spaceViewStore:t,showAddPageButton:!1,renderSidebar:()=>i()(c.a,{isMobile:!0,type:"bookmarks",isTopLevel:!0,spaceStore:e,spaceViewStore:t,parentStore:t.getBookmarkedPagesStore(),childStores:t.getBookmarkedPages(),showAddPageButton:!1,onNavigate:this.handleCloseSidebar,onCreatePage:this.handleCloseSidebar,disabled:!d})}),a.showWorkspaceSection&&i()(m.a,{isMobile:!0,type:"workspace",spaceStore:e,spaceViewStore:t,showAddPageButton:!1,renderSidebar:()=>i()(c.a,{isMobile:!0,type:"workspace",isTopLevel:!0,spaceStore:e,spaceViewStore:t,parentStore:e.getPagesStore(),childStores:t.getWorkspacePages(),addPageTitle:i()(L.FormattedMessage,{defaultMessage:"Add a page",id:"sidebarMobile.addPageToWorkspace.title"}),onNavigate:this.handleCloseSidebar,onCreatePage:this.handleCloseSidebar,showAddPageButton:!0,disabled:!d})}),a.showSharedSection&&i()(m.a,{isMobile:!0,type:"shared",spaceStore:e,spaceViewStore:t,showAddPageButton:!1,renderSidebar:n=>l.a.createElement(l.a.Fragment,null,i()(c.a,{isMobile:!0,type:"shared",isTopLevel:!0,spaceStore:e,spaceViewStore:t,parentStore:t.getSharedPagesStore(),childStores:a.visibleSharedPagesStores,showAddPageButton:!1,onNavigate:this.handleCloseSidebar,onCreatePage:this.handleCloseSidebar,disabled:!d}),this.isEnhancedSidebarEnabled&&a.showSharedOverflowButton&&i()(fe.a,{originRef:n,isMobile:!0,type:"shared",spaceStore:e,spaceViewStore:t,userSettingsStore:s,allSharedPages:a.allSharedPagesStores,visiblePageIds:a.visibleSharedPagesStores.map(({id:e})=>e)}))}),a.showPrivateSection&&!a.showOnlyPrivateSection&&i()(m.a,{isMobile:!0,type:"private",spaceStore:e,spaceViewStore:t,showAddPageButton:!1,renderSidebar:()=>i()(c.a,{isMobile:!0,type:"private",isTopLevel:!0,spaceStore:e,spaceViewStore:t,parentStore:e.getPagesStore(),childStores:t.getPrivatePages(this.environment),addPageTitle:i()(L.FormattedMessage,{defaultMessage:"Add a page",id:"sidebarMobile.addAPrivatePage.title"}),showAddPageButton:!0,onNavigate:this.handleCloseSidebar,onCreatePage:this.handleCloseSidebar,disabled:!d})}),a.showOnlyPrivateSection&&i()(c.a,{isMobile:!0,type:"private",isTopLevel:!0,spaceStore:e,spaceViewStore:t,parentStore:e.getPagesStore(),childStores:t.getPrivatePages(this.environment),addPageTitle:i()(L.FormattedMessage,{defaultMessage:"Add a page",id:"sidebarMobile.addAPageToOnlyPrivateSection.title"}),showAddPageButton:!0,onNavigate:this.handleCloseSidebar,onCreatePage:this.handleCloseSidebar,disabled:!d}),a.showOnlyPrivateSection&&i()("div",{style:{height:20}}),i()(ee,{store:e}),i()(Q,{isMobile:!0}),e.canEdit()&&i()(b.a,{store:r,isMobile:!0}),h&&i()(X,{}),i()(p.a,{isMobile:!0}),i()("div",{style:{height:128}}))})}get isEnhancedSidebarEnabled(){return"on"===W.default.getGroup(this.environment,"sidebar-enhancements")}getWrapStyle(){return de.a(this.environment)?{display:"block",height:"100vh",position:"relative",zIndex:3}:de.i(this.environment)?{display:"block",height:"100vh",position:"fixed",top:0,right:"100%",zIndex:3}:{display:"block",height:"100vh",position:"fixed",top:0,left:0}}getStyle(){return{display:"flex",flexDirection:"column",width:de.d(this.environment),height:"100%",background:de.i(this.environment)?this.theme.mobileSidebarAndroidBackground:this.theme.mobileSidebarIOSBackground,willChange:"transform",color:this.theme.mediumTextColor,...de.i(this.environment)&&{marginLeft:"auto"},...de.a(this.environment)&&{position:"absolute",right:0},cursor:"pointer"}}getTopbarStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",alignItems:"center",justifyContent:"space-between",flex:"none",height:Se.b,marginTop:e.state.paddingTopCSS,paddingLeft:12,boxShadow:de.i(this.environment)&&!de.a(this.environment)&&se.c.state?this.isScrolledToTop.state?this.theme.topbarAndroidShadowCollapsed:this.theme.topbarAndroidShadow:"0 1px 0 ".concat(this.theme.darkDividerColor),background:de.i(this.environment)?this.theme.androidSidebarBackground:be.g.transparent,transition:"box-shadow 300ms",width:"100%",zIndex:1}}}r()(Te,"outlinerStyle",{flexGrow:1,paddingTop:12,userSelect:"none",WebkitUserSelect:"none"}),r()(Te,"actionButtonStyle",{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",height:"100%",width:44,paddingRight:6});t.default=Te},W8UH:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("lSNA"),r=n.n(s),a=(n("3bBZ"),n("LvDl")),l=n.n(a),d=n("q1tI"),c=n("mKX5"),h=n("wldR"),u=n("mF3+"),p=n("LEzx");class m extends p.a{getInitialState(){return{}}}var b=m,g=n("Sb6f"),v=n("/YYm"),S=n("Oy36"),y=n("OxuQ"),f=n("IdIf"),k=n("0lqH"),M=n("D2XV"),w=n("7TLZ"),T=n("prF1"),C=n("SR/M"),I=n("vl8/");class B extends h.a{constructor(...e){super(...e),r()(this,"renderProperty",e=>{const{schema:t,store:n,blockPropertyValueOverlayStore:o}=this.props;if(t[e])return i()(k.b,{store:n,property:e,schema:t,disabled:!0,locked:!1,format:k.b.Format.Calendar,tableWrap:!1,blockPropertyValueOverlayStore:o},e)})}renderComponent(){const{time:e,store:t}=this.props,n=t.hasIcon()||!t.isEmptyPage(),o=Object(v.a)({store:t,fullyQualified:!1}),s=w.i(t);return i()(T.a,{href:o},void 0,i()(C.a,{focused:!1,title:i()(d.Fragment,{},void 0,e&&i()("div",{style:{display:"flex",color:this.theme.mediumTextColor,fontSize:14,marginTop:8,marginBottom:6}},void 0,e),i()("div",{style:{display:"flex",alignItems:"center",...e&&{marginBottom:8}}},void 0,n&&i()(S.a,{disabled:!0,icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),size:24,style:{flexShrink:0,marginRight:8}}),i()(y.a,{store:t,style:{fontWeight:g.a.fontWeight.semibold}}),s>0&&i()("div",{style:{display:"flex",alignItems:"center",color:this.theme.regularDividerColor,fontSize:12,marginLeft:4,flexShrink:0}},void 0,u.a.speechBubble({width:12,height:12,marginRight:4,fill:this.theme.mediumIconColor}),s))),caption:this.renderProperties()}))}renderProperties(){const{format:e,schema:t,store:n}=this.props,o=(e.calendar_properties?e.calendar_properties.filter(e=>e.visible).map(e=>e.property):[]).filter(e=>f.e({blockValue:n.getValue(),property:e,schema:t,getRecordValue:n.getRecordValue,userTimeZone:M.m,intl:I.default.getIntl()}));if(o.length>0)return i()("div",{style:{marginTop:8}},void 0,o.map(this.renderProperty))}}var P=B,A=n("wpmu"),x=n("1QGs"),R=n("MBf9"),O=n("gbGO"),F=n("2Y+N"),j=n("nObc"),D=n("VVDu"),N=n("zTdN"),q=n("lCCU"),L=n("H4VD"),V=n("O+wX"),U=n("zgcg"),W=n("J9+s"),_=n("nPEg"),E=n("L/re"),z=n("RSEC"),G=n("hU3F"),Q=n("HRSx");class H extends h.a{constructor(...e){super(...e),r()(this,"storeTypes",{store:b,resultStore:G.a.of(void 0)}),r()(this,"renderResults",()=>{const{disabled:e,collectionStore:t}=this.props,n=this.getCurrentStartOfDay(),o=n.clone().endOf("day"),s=this.getCurrentResults();return i()(O.b,{menuType:O.b.MenuType.Modal,title:i()("div",{style:H.headerStyle},void 0,i()(q.a,{onClick:this.handleLeftClick,icon:u.a.chevronLeft,style:{marginRight:8,marginTop:2},mobileFeedback:!0}),i()("div",{},void 0,n.format("MMMM Do")),i()(q.a,{onClick:this.handleRightClick,icon:u.a.chevronRight,style:{marginLeft:8,marginTop:2},mobileFeedback:!0})),right:i()(_.DoneMenuText,{}),onClickRight:this.props.onDismiss},void 0,!s&&i()(F.a,{},void 0,i()(D.a,{})),s&&0===s.length&&i()(F.a,{},void 0,i()(N.a,{title:i()(W.FormattedMessage,{defaultMessage:"No items",id:"mobileCalendarDayMenu.noResults.message"})})),s&&s.length>0&&i()(F.a,{},void 0,s.map(e=>{const i=A.a.createChildStore(t,{id:e.id,table:Q.a});return this.renderItem(i,e,n,o)})),!e&&i()(F.a,{topBorder:!0},void 0,i()(j.a,{focused:!1,onClick:this.handleAddItemClick,title:i()(W.FormattedMessage,{defaultMessage:"New item",id:"mobileCalendarDayMenu.newItemButton.label"})})))}),r()(this,"handleLeftClick",()=>{const e=this.getCurrentStartOfDay();this.stores.store.setState({...this.stores.store.state,currentStartOfDay:e.clone().add(-1,"day").valueOf()})}),r()(this,"handleRightClick",()=>{const e=this.getCurrentStartOfDay();this.stores.store.setState({...this.stores.store.state,currentStartOfDay:e.clone().add(1,"day").valueOf()})}),r()(this,"handleAddItemClick",()=>{const{collectionViewLocalStore:e,collectionStore:t,calendarBy:n,resultsStore:o}=this.props,i=this.getCurrentStartOfDay(),s=R.createAndCommit(this.environment,s=>x.e({environment:this.environment,collectionStore:t,collectionViewLocalStore:e,calendarBy:n,startOfDay:i.valueOf(),results:o.state,transaction:s})),r=Object(v.a)({store:s});this.navigate(r)}),r()(this,"reducerStore",this.createComputedStore(()=>{const{collectionViewLocalStore:e}=this.props;return Object(E.b)({collectionViewLocalStore:e,startOfDay:this.getCurrentStartOfDay().valueOf()})},!0)),r()(this,"getRecordValue",this.props.collectionStore.getRecordValue)}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):L.navigate({environment:this.environment,url:e})}renderComponent(){const{collectionViewLocalStore:e}=this.props,t=this.reducerStore.state;if(t)return i()(z.a,{id:"calendar_day_results",reducer:t,collectionViewLocalStore:e,render:this.renderResults,resultStore:this.stores.resultStore})}renderItem(e,t,n,o){const{disabled:s,blockPropertyValueOverlayStore:r}=this.props;return i()(P,{store:e,time:t.includeTime?this.renderTime(t,n,o):void 0,disabled:s,format:this.props.format,schema:this.props.schema,blockPropertyValueOverlayStore:r},t.id)}renderTime(e,t,n){const{schema:o,calendarBy:i,intl:s}=this.props,r=o[i];if(!r||"date"!==r.type)return;const a=r.date_format||M.v,l=r.time_format||M.x,d=Object(c.a)(e.start),h=e.end?Object(c.a)(e.end):void 0,u=Boolean(!d.isBetween(t,n)||h&&!h.isBetween(t,n));if(e.end){const t=M.s(e.start.valueOf(),e.end?e.end.valueOf():e.start.valueOf(),e.timeZone);return u?Object(V.a)({value:t,date_format:a,time_format:l,userTimeZone:e.timeZone,allowRelativeDates:!0,intl:s}):Object(V.d)({start_time:t.start_time,end_time:t.end_time,time_format:l,humanReadable:!0,intl:s})}return Object(V.c)({start_time:M.r(e.start.valueOf(),e.timeZone).start_time,time_format:l,humanReadable:!0,intl:s})}getCurrentStartOfDay(){const{currentStartOfDay:e}=this.stores.store.state;return e?Object(c.a)(e):Object(c.a)(this.props.initialStartOfDay)}getCurrentResults(){const{collectionStore:e,collectionViewLocalStore:t}=this.props,n=this.stores.resultStore.state,o=t.normalizedQueryStore.state,i=t.normalizedSchemaStore.state,s=o?o.calendar_by:void 0;if(!(n&&o&&s&&i))return;let r=l.a.compact(n.blockIds.map(t=>{const n=A.a.createChildStore(e,{id:t,table:Q.a});return Object(E.a)({blockStore:n,calendarBy:s,schema:i,getRecordValue:this.getRecordValue,intl:this.props.intl})}));return o.sort||(r=l.a.sortBy(r,e=>e.start)),r}}r()(H,"contextTypes",U.a),r()(H,"headerStyle",{display:"flex",alignItems:"center",height:"100%"});t.default=Object(W.injectIntl)(H)},ZKzj:function(e,t,n){"use strict";n.r(t);var o=n("pVnL"),i=n.n(o),s=n("gcR/"),r=n.n(s),a=n("lSNA"),l=n.n(a),d=(n("3bBZ"),n("q1tI")),c=n.n(d),h=n("LvDl"),u=n.n(h),p=n("mF3+"),m=n("l4I2"),b=n("CaJT"),g=n("6rsX"),v=n("y6Dp"),S=n("Sb6f"),y=n("wldR"),f=n("9hmv"),k=n("q8I6"),M=n("y4kc"),w=n("F9et"),T=n("unoy"),C=n("wXH4"),I=n("RI9y"),B=n("sjR4"),P=n("DNgp"),A=n("Iece"),x=n("MeYt"),R=n("typy"),O=n("J9+s"),F=n("xPzf"),j=n("VpIZ"),D=n("HTFi"),N=n("tCjx"),q=n("1G+a"),L=n("3Z0Q");class V extends y.a{constructor(...e){super(...e),l()(this,"scrollerDiv",void 0),l()(this,"currentlyShownTimer",void 0),l()(this,"previouslyShownOnNative",!1),l()(this,"handleScrollerRef",e=>{e&&(this.scrollerDiv=e)}),l()(this,"handleUnindent",e=>{L.q(this.environment)}),l()(this,"handleIndent",e=>{L.h(this.environment)}),l()(this,"handleMoveUp",e=>{L.m(this.environment)}),l()(this,"handleMoveDown",e=>{L.l(this.environment)}),l()(this,"handleUndo",()=>{L.p(this.environment)}),l()(this,"handleRedo",()=>{L.n(this.environment)}),l()(this,"handleDismissKeyboard",e=>{g.e(this.environment),this.props.stores.store.setState({...this.props.stores.store.state,isInsertOpen:!1}),this.trackItemTap("hide_keyboard"),T.e()}),l()(this,"handleInsert",e=>{this.props.stores.store.setState({...this.props.stores.store.state,isInsertOpen:!0}),this.trackItemTap("insert")}),l()(this,"handleTakePicture",e=>{L.g(this.environment)}),l()(this,"handleMention",e=>{L.j(this.environment)}),l()(this,"handleComment",e=>{L.d(this.environment)}),l()(this,"handleDelete",e=>{L.e(this.environment)}),l()(this,"handleActionsScroll",()=>{v.e(this.environment)}),l()(this,"handleActionsScrollDebounced",u.a.debounce(this.handleActionsScroll,500)),l()(this,"handleMoreClick",e=>{L.k(this.environment,e.clientX,e.clientY)}),l()(this,"listenForPositionChanges",this.createComputedStore(()=>{const e=P.default.state;return"editing"===e.mode?{scrollTop:A.a.state.scrollTop,editing:!0,store:e.store.id,selection:e.selection.endIndex}:{scrollTop:A.a.state.scrollTop,editing:!1}})),l()(this,"shouldShow",this.createComputedStore(()=>{var e;return L.r(this.environment,this.props.stores.ignoreSelectionAreaStore,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)})),l()(this,"shouldShowTextActions",this.createComputedStore(()=>L.u(this.props.stores.ignoreSelectionAreaStore))),l()(this,"shouldShowBlockActions",this.createComputedStore(()=>!this.shouldShowTextActions.state)),l()(this,"canTriggerBlockActions",this.createComputedStore(()=>L.a(this.shouldShowBlockActions.state,this.pageContext&&this.pageContext.publicEditModeStore.state))),l()(this,"canTriggerTextActions",this.createComputedStore(()=>L.b(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore)))}willMountOrUpdate(){const{device:e}=this.environment,t=this.shouldShow.state;if(e.isMobileBrowser){const e=this.props.stores.store.state.isOpen;t?e?void 0!==this.currentlyShownTimer&&(window.clearTimeout(this.currentlyShownTimer),this.currentlyShownTimer=void 0):(this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!0}),this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0)):e&&void 0===this.currentlyShownTimer&&(this.currentlyShownTimer=window.setTimeout(()=>{this.currentlyShownTimer=void 0,this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!1})},200))}else t!==this.previouslyShownOnNative&&(this.previouslyShownOnNative=t,this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0))}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,n=this.isOpen(),o=e.isMobile&&D.a.state;if(this.props.position===q.a.Bottom)return r()("div",{style:{position:"absolute",bottom:o?t.getSafePaddingBottomCSS(N.default.height):0,left:0,height:V.height,width:"100%",pointerEvents:n?"auto":"none",opacity:n?1:0,transform:n?"translateY(0)":"translateY(".concat(V.height,"px)"),transition:"opacity 120ms ease-out, transform 120ms ease-out"}},void 0,this.renderActionButtons());{const e=this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionRect||I.getSelectionRect();if(!e)return;const t=document.body.getBoundingClientRect(),o={...e,left:10,top:e.top+10-t.top};this.listenForPositionChanges.state;const{device:i}=this.environment;return r()(C.c,{popupType:i.isMobileNative?C.c.PopupType.SlideUp:C.c.PopupType.Popup,open:n,preventBlockRenderQueueOnEnter:!0,placementToOrigin:C.c.Placement.Bottom,alignmentToOrigin:C.c.Alignment.Start,originRect:o,disableMouseCapture:!0,keepFocus:!0,render:()=>r()("div",{style:{height:V.height,width:"calc(80wv)",borderRadius:3,overflow:"hidden"}},void 0,this.renderActionButtons())})}}renderActionButtons(){const e=this.shouldShowTextActions.state,t=this.shouldShowBlockActions.state,n=L.t({environment:this.environment,store:this.props.currentBlockStore});return r()("div",{style:this.getActionButtonStyles()},void 0,n&&this.renderTemplatesButton(),!n&&t&&this.renderBlockActions(),!n&&e&&this.renderTextActions(),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),borderLeft:this.getItemBorder(),borderRight:"none"},onClick:this.handleDismissKeyboard},void 0,V.keyboardIcon))}renderBlockActions(){const e=this.canTriggerBlockActions.state;let t=!1,n=!1;const o=this.props.currentBlockStore.getValue();o&&(Object(j.C)(o)||(t=!0),Object(j.D)(o)||(n=!0));const{device:s}=this.environment;return c.a.createElement("div",{ref:this.handleScrollerRef,style:this.getActionMenuStyle(),onScroll:this.handleActionsScrollDebounced},r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),...!s.isSmallPhone&&{paddingLeft:12,paddingRight:12}},onClick:this.handleInsert,disabled:!e},void 0,V.plusIcon,this.renderChevronDown()),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.a.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTurnIntoOpen:!0}),this.trackItemTap("turn_into")},disabled:!e},void 0,r()(O.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),this.renderChevronDown()),r()(w.a,{capture:!0,render:e=>c.a.createElement(x.a,i()({mobileFeedback:!0,disabledFeedback:!0},e,{style:this.getItemStyle(),onClick:this.handleMention,disabled:!n}),r()("span",{style:{fontSize:19,lineHeight:1,fontWeight:S.a.fontWeight.medium,marginBottom:s.isAndroid?4:0}},void 0,"@"))}),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleComment,disabled:!t},void 0,V.discussionIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleTakePicture,disabled:!e},void 0,V.imageIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleDelete,disabled:!e},void 0,V.trashIcon),this.renderBlockMovementActions(),this.renderBlockUndoActions(),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.a.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isColorOpen:!0}),this.trackItemTap("color")},disabled:!e},void 0,r()(O.FormattedMessage,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),this.renderChevronDown()),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.a.fontWeight.medium},onClick:this.handleMoreClick,disabled:!e},void 0,r()(O.FormattedMessage,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),this.renderChevronDown()))}renderBlockMovementActions(){const e=this.canTriggerBlockActions.state,t=B.default.state.stores[0];return r()("div",{style:{...this.getItemStyle(),paddingLeft:6,paddingRight:6}},void 0,r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!e||!m.b(t),onClick:this.handleUnindent},void 0,V.unindentIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!e||!m.a(t),onClick:this.handleIndent},void 0,V.indentIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!e,onClick:this.handleMoveUp},void 0,V.moveUpIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!e,onClick:this.handleMoveDown},void 0,V.moveDownIcon))}renderBlockUndoActions(){return r()("div",{style:{...this.getItemStyle(),paddingLeft:6,paddingRight:6}},void 0,r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!b.b(),onClick:this.handleUndo},void 0,V.undoIcon),r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:V.minorItemStyle,disabled:!b.a(),onClick:this.handleRedo},void 0,V.redoIcon))}renderTextActions(){const e=this.canTriggerTextActions.state,t=this.props.currentBlockStore.canComment();return r()("div",{style:this.getActionMenuStyle(),onScroll:this.handleActionsScrollDebounced},void 0,r()(M.a,{style:this.getItemStyle(),blockStore:B.default.state.stores[0],disabled:!t}),r()(f.a,{type:"b",style:this.getItemStyle(),onClick:()=>this.trackItemTap("bold"),disabled:!e},void 0,r()("span",{style:{fontWeight:S.a.fontWeight.semibold}},void 0,r()(O.FormattedMessage,{defaultMessage:"B",id:"mobileActionBar.bold.symbol",description:"Letter 'B' which represents 'bold' format option."}))),r()(f.a,{type:"i",style:this.getItemStyle(),onClick:()=>this.trackItemTap("italic"),disabled:!e},void 0,r()("span",{style:{fontStyle:"italic",fontWeight:S.a.fontWeight.semibold}},void 0,r()(O.FormattedMessage,{defaultMessage:"i",id:"mobileActionBar.italic.symbol",description:"Letter 'i' which represents 'italic' format option."}))),r()(f.a,{type:"_",style:this.getItemStyle(),onClick:()=>this.trackItemTap("underline"),disabled:!e},void 0,r()("span",{style:{textDecoration:"underline"}},void 0,r()(O.FormattedMessage,{defaultMessage:"U",id:"mobileActionBar.underline.symbol",description:"Letter 'U' which represents 'underline' format option."}))),r()(f.a,{type:"s",style:this.getItemStyle(),onClick:()=>this.trackItemTap("strike_through"),disabled:!e},void 0,r()("span",{style:{textDecoration:"line-through"}},void 0,r()(O.FormattedMessage,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol",description:"Letter 'S' which represents 'strike-through' format option."}))),r()(f.a,{type:"c",style:this.getItemStyle(),onClick:()=>this.trackItemTap("code"),disabled:!e},void 0,r()("span",{style:{fontFamily:S.a.fontFamily.githubMono}},void 0,r()(O.FormattedMessage,{defaultMessage:"Code",id:"mobileActionBar.code.symbol",description:"Word 'code' which represents 'code' format option."}))),r()(k.a,{style:this.getItemStyle(),disabled:!e},void 0,r()("span",{style:{borderBottom:"1px solid ".concat(this.theme.linkDecorationColor)}},void 0,r()(O.FormattedMessage,{defaultMessage:"Link",id:"mobileActionBar.link.symbol",description:"Word 'link' which represents 'link' format option."}))),r()(F.a,{onClick:()=>this.trackItemTap("equation"),disabled:!e,style:this.getItemStyle()},void 0,p.a.equation({width:16,height:16})),r()(R.a,{style:this.getItemStyle(),ignoreSelectionAreaStore:this.props.stores.ignoreSelectionAreaStore,disabled:!e}))}renderTemplatesButton(){return r()("div",{style:this.getActionMenuStyle()},void 0,r()(x.a,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),borderRight:"none",fontWeight:S.a.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTemplatesOpen:!0}),this.trackItemTap("templates")}},void 0,p.a.templatesColor({width:20,marginRight:8}),r()(O.FormattedMessage,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),this.renderChevronDown()))}renderChevronDown(){return p.a.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})}isOpen(){const{device:e}=this.environment;return e.isMobileBrowser?this.props.stores.store.state.isOpen:this.shouldShow.state}trackItemTap(e){v.Oe(this.environment,{itemName:e})}getItemBorder(){return"1px solid ".concat(this.theme.regularDividerColor)}getActionButtonStyles(){const{device:e,WindowSizeStore:t}=this.environment;return{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:this.props.position===q.a.Bottom?this.theme.bottomActionBarShadow:this.theme.mediumBoxShadow,backgroundColor:this.theme.keyboardActionBarBackground,paddingLeft:e.isMobileNative?t.state.paddingLeftCSS:0,paddingRight:e.isMobileNative?t.state.paddingRightCSS:0}}getActionMenuStyle(){return{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}}getItemStyle(){const{device:e}=this.environment;return{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:e.isSmallPhone?8:10,paddingRight:e.isSmallPhone?8:10,borderRight:this.getItemBorder(),whiteSpace:"nowrap",height:V.height,flexShrink:0,flexGrow:0,flexBasis:"auto",color:this.theme.regularTextColor,minWidth:e.isSmallPhone?42:44}}}l()(V,"unindentIcon",p.a.indentDown({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1})),l()(V,"indentIcon",p.a.indentDown({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1})),l()(V,"moveUpIcon",p.a.moveUp({width:18,height:18,position:"relative",left:2})),l()(V,"moveDownIcon",p.a.moveUp({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2})),l()(V,"undoIcon",p.a.undo({width:19,height:19})),l()(V,"redoIcon",p.a.redo({width:19,height:19})),l()(V,"trashIcon",p.a.trash({width:18,height:18})),l()(V,"discussionIcon",p.a.speechBubbleThin({width:18,height:18})),l()(V,"plusIcon",p.a.thinPlus({width:14,height:14})),l()(V,"keyboardIcon",p.a.keyboard({width:18,height:18})),l()(V,"imageIcon",p.a.image({width:18,height:18})),l()(V,"height",42),l()(V,"minorItemStyle",{width:34,justifyContent:"center"}),t.default=Object(O.injectIntl)(V)},fJfa:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("lSNA"),r=n.n(s),a=(n("3bBZ"),n("Zo/l")),l=n("q1tI"),d=n.n(l);function c(e,t){const n=Object(l.useRef)(Math.random().toString(36).substr(2,9)),o=t;return Object(l.useEffect)(()=>{const t=n.current;if(e)return e({type:"mount",id:t,props:o}),()=>e({type:"unmount",id:t})},[e,o]),e?n.current:void 0}var h=n("wldR"),u=n("J9+s"),p=n("mINO"),m=n("pFdg");function b(e,t,n){const{content:o,apiRequestValue:i}=n;return{id:e,content:o,action:{type:t,apiRequestValue:i}}}const g=["insertBlock","turnInto","textColor"],v=["textFormatting"];function S(e,t){return{type:e,apiRequestValue:t}}function y(e,t){const n={type:e,data:t};return JSON.stringify(n)}const f={showActionBarMenu:p.j({required:{type:p.f("showActionBarMenu"),data:p.j({required:{actionBarMenuId:p.g("textColor","insertBlock","turnInto","template")},optional:{}})},optional:{}}),blockAction:p.j({required:{type:p.g("blockAction"),data:p.j({required:{action:p.g("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more")},optional:{}})},optional:{}})},k=Object.keys(f);let M;!function(e){e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData"}(M||(M={}));class w{constructor(e,t){this.type=e,this.message=t}}function T(e){const{disableBlockActions:t,disableCommentAction:n,disableMentionAction:o,selectedMenuType:i}=e;return{id:"mab.buttonSection.0",buttons:[b("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},disabled:t,selected:"insertBlock"===i},apiRequestValue:{menuType:"insertBlock"}}),b("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:t,selected:"turnInto"===i},apiRequestValue:{menuType:"turnInto"}}),b("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},disabled:t},apiRequestValue:{jsonPayload:y("blockAction",{action:"filePicker"})}}),b("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:o},apiRequestValue:{jsonPayload:y("blockAction",{action:"mention"})}}),b("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bubble.left",localImageIdentifier:"comment"},disabled:n},apiRequestValue:{jsonPayload:y("blockAction",{action:"comment"})}}),b("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"bold.italic.underline",localImageIdentifier:"boldItalicUnderline"}},apiRequestValue:{subMenuType:"textFormatting"}})]}}function C(e){const{disableBlockActions:t,disableIndent:n,disableUnindent:o}=e;return{id:"mab.buttonSection.1",buttons:[b("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"},disabled:t||o},apiRequestValue:{jsonPayload:y("blockAction",{action:"unindent"})}}),b("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"},disabled:t||n},apiRequestValue:{jsonPayload:y("blockAction",{action:"indent"})}}),b("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"},disabled:t},apiRequestValue:{jsonPayload:y("blockAction",{action:"moveUp"})}}),b("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"},disabled:t},apiRequestValue:{jsonPayload:y("blockAction",{action:"moveDown"})}})]}}function I(e){const{disableUndo:t,disableRedo:n}=e;return{id:"mab.buttonSection.3",buttons:[b("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.counterclockwise",localImageIdentifier:"undo"},disabled:t},apiRequestValue:{jsonPayload:y("blockAction",{action:"undo"})}}),b("mab.button.redo","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.clockwise",localImageIdentifier:"redo"},disabled:n},apiRequestValue:{jsonPayload:y("blockAction",{action:"redo"})}}),b("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"trash",localImageIdentifier:"trash"}},apiRequestValue:{jsonPayload:y("blockAction",{action:"trash"})}}),b("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"ellipsis",localImageIdentifier:"more"}},apiRequestValue:{jsonPayload:y("blockAction",{action:"more"})}})]}}var B=n("3Z0Q"),P=n("sjR4");const A={id:"mab.buttonSection.back",buttons:[b("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"}},apiRequestValue:{subMenuType:null}})]};function x(e){const{disableTextActions:t,textTintColor:n,boldSelected:o,italicSelected:i,underlineSelected:s,strikeSelected:r,codeSelected:a,linkSelected:l,equationSelected:d,selectedMenuType:c}=e;return{id:"mab.buttonSection.textFormatting",buttons:[b("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bold",localImageIdentifier:"bold"},disabled:t,selected:o},apiRequestValue:{jsonPayload:y("blockAction",{action:"bold"})}}),b("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:t,selected:i},apiRequestValue:{jsonPayload:y("blockAction",{action:"italic"})}}),b("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:t,selected:s},apiRequestValue:{jsonPayload:y("blockAction",{action:"underline"})}}),b("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:t,selected:r},apiRequestValue:{jsonPayload:y("blockAction",{action:"strikethrough"})}}),b("mab.button.textColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:{localImageIdentifier:"textColor",imageTintColor:n},disabled:t,selected:"textColor"===c},apiRequestValue:{menuType:"textColor"}}),b("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},disabled:t,selected:a},apiRequestValue:{jsonPayload:y("blockAction",{action:"code"})}}),b("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"link",localImageIdentifier:"link"},disabled:t,selected:l},apiRequestValue:{jsonPayload:y("blockAction",{action:"link"})}}),b("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},disabled:t,selected:d},apiRequestValue:{jsonPayload:y("blockAction",{action:"equation"})}})]}}var R=n("VpIZ"),O=n("l4I2"),F=n("CaJT"),j=n("wiBh"),D=n("cBa6"),N=n("6rsX"),q=n("unoy"),L=n("zmp8"),V=n("BJyN"),U=n("vl8/"),W=n("A9TN"),_=n("qxI2");function E(e){const{type:t,actionSections:n,closeParentMenu:o,context:i}=e,s=new Map,r=[];return n.forEach(e=>{const n={id:"".concat(e.key),title:e.title,items:e.actions.map(e=>{const n="".concat(e.key,"-").concat(e.displayName||"");s[n]={...e,closeParentMenu:o};const r=e.nativeRender&&e.nativeRender(i),a=null==r?void 0:r.thumbnail;return{id:n,title:e.displayName||"",icon:{...r,remoteImageUrl:a?"".concat(W.default.baseURL).concat(a):void 0,localAssetBundleImagePath:a},action:S("webAction_genericAction",{menuType:t,actionId:n}),checked:!1}})};r.push(n)}),{actions:s,sections:r}}function z(e){const{key:t,displayName:n,thumbnail:o,analyticsName:i,closeParentMenu:s,action:r}=e,a=n?U.default.formatMessage(n):void 0,l=n,d=l?"".concat(U.default.formatMessage(l)," ").concat(l.defaultMessage):void 0;return{key:"action ".concat(t),displayName:a,thumbnail:o,analyticsName:i||"textformatting_action_".concat(t),searchName:d,validators:[],action:r,closeParentMenu:Boolean(s)}}const G={bold:z({key:"bold",closeParentMenu:!0,action:({environment:e})=>{B.o(e,["b"])}}),italic:z({key:"italic",closeParentMenu:!0,action:({environment:e})=>{B.o(e,["i"])}}),underline:z({key:"underline",closeParentMenu:!0,action:({environment:e})=>{B.o(e,["_"])}}),strikethrough:z({key:"strikethrough",closeParentMenu:!0,action:({environment:e})=>{B.o(e,["s"])}}),code:z({key:"code",closeParentMenu:!0,action:({environment:e})=>{B.o(e,["c"])}}),comment:z({key:"comment",closeParentMenu:!0,action:({environment:e})=>{B.d(e)}}),equation:z({key:"equation",closeParentMenu:!0,action:async({environment:e})=>{await B.c(e),B.f(e)}}),filePicker:z({key:"filePicker",closeParentMenu:!0,action:({environment:e})=>{B.g(e)}}),indent:z({key:"indent",closeParentMenu:!0,action:({environment:e})=>{B.h(e)}}),unindent:z({key:"unindent",closeParentMenu:!0,action:({environment:e})=>{B.q(e)}}),moveDown:z({key:"moveDown",closeParentMenu:!0,action:({environment:e})=>{B.l(e)}}),moveUp:z({key:"moveUp",closeParentMenu:!0,action:({environment:e})=>{B.m(e)}}),undo:z({key:"undo",closeParentMenu:!0,action:({environment:e})=>{B.p(e)}}),redo:z({key:"redo",closeParentMenu:!0,action:({environment:e})=>{B.n(e)}}),trash:z({key:"trash",closeParentMenu:!0,action:({environment:e})=>{B.e(e)}}),mention:z({key:"mention",closeParentMenu:!0,action:async({environment:e})=>{await B.c(e),B.j(e)}}),link:z({key:"link",closeParentMenu:!0,action:async({environment:e})=>{await B.c(e),B.i(e)}}),more:z({key:"more",closeParentMenu:!0,action:({environment:e})=>{B.k(e,0,0)}}),dismissKeyboard:z({key:"dismissKeyboard",closeParentMenu:!0,action:({environment:e})=>{}})};var Q=n("QcDD"),H=n("LvDl"),Z=n.n(H);function J(e){var t;const{onAction:n,fallbackRenderer:o,...i}=e,s=c(null===(t=Object(a.b)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,i);return function(e,t,n,o){var i;const s=null===(i=Object(a.b)().mobileNative)||void 0===i?void 0:i.componentEvents;Object(l.useEffect)(()=>{if(s&&o&&t)return s.addListener(e,t,n,o)},[e,t,n,o,s])}("MobileActionBar",s,"onAction",n),!s&&o?d.a.createElement(d.a.Fragment,null,o()):null}class X extends h.a{constructor(...e){super(...e),r()(this,"getCurrentActionBarSchema",this.createComputedStore(()=>{const e=this.environment.NativeMobileActionBarStore?this.environment.NativeMobileActionBarStore.state.menuType:null;var t=null;const n=B.t({environment:this.environment,store:this.props.currentBlockStore}),o=!!this.environment.NativeMobileActionBarStore&&this.environment.NativeMobileActionBarStore.state.isSubMenuOverridden,i=this.shouldShowTextActions.state,s=this.environment.NativeMobileActionBarStore?this.environment.NativeMobileActionBarStore.state.subMenuType:null;if(o)t=s;else if(i){var r;t="textFormatting",null===(r=this.environment.NativeMobileActionBarStore)||void 0===r||r.update(e=>({...e,isSubMenuOverridden:!1,subMenuType:null}))}const a=!this.canTriggerTextActions.state,l=!this.canTriggerBlockActions.state,d=this.props.currentBlockStore.getValue(),c=this.commentActionDisabled(d),h=this.mentionActionDisabled(d),u=P.default.state.stores[0],p=!O.a(u),m=!O.b(u),g=!F.b(),v=!F.a();var S,f;S=n?[(f="Choose a template...",{id:"mab.buttonSection.template",buttons:[b("mab.button.choose_template","webAction_generic",{content:{type:"text_and_icon",imageReference:{localImageIdentifier:"template"},text:f},apiRequestValue:{jsonPayload:y("showActionBarMenu",{actionBarMenuId:"template"})}})]})]:[T({disableBlockActions:l,disableCommentAction:c,disableMentionAction:h,selectedMenuType:e}),C({disableBlockActions:l,disableIndent:p,disableUnindent:m}),I({disableUndo:g,disableRedo:v})];const k=[A,x({disableTextActions:a,selectedMenuType:e,...this.getTextFormattingSelections()})],M=this.memoizedNativeMenus({environment:this.environment,blocks:P.default.state.stores});return function(e){const{selectedMenu:t,selectedSubMenu:n,nativeMenus:o,buttonSections:i,nativeSubMenus:s}=e;return{actionApi:{nativeAction_setSubMenuType:{request:{subMenuType:null},response:{}},nativeAction_hideKeyboard:{request:{},response:{}},nativeAction_setMenuType:{request:{menuType:null},response:{}},webAction_generic:{request:{jsonPayload:"{}"},response:{}},webAction_genericAction:{request:{menuType:null,actionId:""},response:{}}},nativeMenus:o,nativeSubMenus:s,state:{buttonSections:i,selectedMenu:t,selectedSubMenu:n,dismissKeyboardButton:b("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"}},apiRequestValue:{jsonPayload:y("blockAction",{action:"dismissKeyboard"})}}),mutatedNativeMenus:{},localizedMessages:{}}}}({selectedMenu:e,selectedSubMenu:t,nativeMenus:{textColor:{id:"textColor",sections:M.textColor.sections},insertBlock:{id:"insertBlock",sections:M.insertBlock.sections},turnInto:{id:"turnInto",sections:M.turnInto.sections}},nativeSubMenus:{textFormatting:k},buttonSections:S})})),r()(this,"shouldShow",this.createComputedStore(()=>{var e;return B.r(this.environment,this.props.stores.ignoreSelectionAreaStore,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)})),r()(this,"shouldShowTextActions",this.createComputedStore(()=>B.u(this.props.stores.ignoreSelectionAreaStore))),r()(this,"shouldShowBlockActions",this.createComputedStore(()=>!this.shouldShowTextActions.state)),r()(this,"canTriggerBlockActions",this.createComputedStore(()=>B.a(this.shouldShowBlockActions.state,this.pageContext&&this.pageContext.publicEditModeStore.state))),r()(this,"canTriggerTextActions",this.createComputedStore(()=>B.b(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),r()(this,"memoizedNativeMenus",Z.a.memoize(e=>{const{blocks:t,environment:n}=e;return o={environment:n,blocks:t},{insertBlock:E({type:"insertBlock",actionSections:_.a(V.h,o),context:o,closeParentMenu:!0}),turnInto:E({type:"turnInto",actionSections:_.a([V.r],o),context:o,closeParentMenu:!0}),textColor:E({type:"textColor",actionSections:_.a([V.o,V.b],o),context:o,closeParentMenu:!1})};var o}))}renderComponent(){const e=this.shouldShow.state;return i()(J,{isOpen:e,schema:this.getCurrentActionBarSchema.state,onAction:e=>{const{action:t}=e;switch(t.type){case"nativeAction_hideKeyboard":break;case"nativeAction_setMenuType":this.handleSetMenuTypeAction(t);break;case"nativeAction_setSubMenuType":this.handleSetSubMenuTypeAction(t);break;case"webAction_generic":this.handleGenericWebAction(t);break;case"webAction_genericAction":this.handleActionRegistryAction(t)}},fallbackRenderer:this.props.fallbackRenderer})}commentActionDisabled(e){return!(!e||!Object(R.C)(e))}mentionActionDisabled(e){return!(!e||!Object(R.D)(e))}handleSetMenuTypeAction(e){const t=function(e){if("nativeAction_setMenuType"!==e.type)return new w(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new w(M.MissingPayload,void 0);const n=p.j({required:{menuType:p.g(...g,null)},optional:{}}),o=Object(m.d)(n,t);return o?new w(M.InvalidRequestType,JSON.stringify(o)):t.menuType}(e);if(t instanceof w)return void console.error(JSON.stringify(t));(this.environment.NativeMobileActionBarStore?this.environment.NativeMobileActionBarStore.state.menuType:null)===t?this.setCurrentMenuType(null,!0):this.setCurrentMenuType(t,!0)}handleSetSubMenuTypeAction(e){const t=function(e){if("nativeAction_setSubMenuType"!==e.type)return new w(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new w(M.MissingPayload,void 0);const n=p.j({required:{subMenuType:p.g(...v,null)},optional:{}}),o=Object(m.d)(n,t);return o?new w(M.InvalidRequestType,JSON.stringify(o)):t.subMenuType}(e);t instanceof w?console.error(JSON.stringify(t)):this.setCurrentSubMenuType(t)}handleGenericWebAction(e){const t=function(e){if("webAction_generic"!==e.type)return new w(M.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new w(M.MissingPayload,void 0);const n=JSON.parse(t.jsonPayload),o=p.j({required:{type:p.g(...k)},optional:{}}),i=Object(m.d)(o,n);if(i)return new w(M.InvalidRequestType,JSON.stringify(i));const s=n,r=f[s.type],a=Object(m.d)(r,s);return a?new w(M.InvalidData,JSON.stringify(a)):s}(e);if(t instanceof w)console.error(JSON.stringify(t));else switch(t.type){case"blockAction":if("dismissKeyboard"===t.data.action){this.handleDismissKeyboard();break}const e=G[t.data.action];if(!e)break;const n=e.action;if(n){const{currentBlockStore:t}=Q.default.state;if(!t)break;n({environment:this.environment,blocks:[t]}),e.closeParentMenu&&this.setCurrentMenuType(null,!0)}break;case"showActionBarMenu":switch(t.data.actionBarMenuId){case"insertBlock":this.handleInsert();break;case"textColor":this.handleTextColor();break;case"turnInto":this.handleTurnInto();break;case"template":this.handleTemplate()}}}handleActionRegistryAction(e){var t,n;const o=null===(t=e.apiRequestValue)||void 0===t?void 0:t.menuType,i=null===(n=e.apiRequestValue)||void 0===n?void 0:n.actionId;if(!o||!i)return;const s=this.memoizedNativeMenus({environment:this.environment,blocks:P.default.state.stores})[o].actions[i];if(!s)return;const r=s.action;r&&r({environment:this.environment,blocks:P.default.state.stores}),s.closeParentMenu&&this.setCurrentMenuType(null,!0)}handleDismissKeyboard(){N.e(this.environment),this.props.stores.store.update(e=>({...e,isInsertOpen:!1})),this.setCurrentMenuType(null,!1),B.v(this.environment,"hide_keyboard"),q.e()}getTextFormattingSelections(){return{textTintColor:this.getHexFromTextHighlightAnnotation(),boldSelected:Boolean(Object(j.b)(D.b.Bold)),italicSelected:Boolean(Object(j.b)(D.b.Italic)),underlineSelected:Boolean(Object(j.b)(D.b.Underline)),strikeSelected:Boolean(Object(j.b)(D.b.Strike)),codeSelected:Boolean(Object(j.b)(D.b.Code)),linkSelected:Boolean(Object(j.b)(D.b.Link)),equationSelected:Boolean(Object(j.b)(D.b.Equation))}}getHexFromTextHighlightAnnotation(){const e=Object(j.b)("h");if(!e)return;const t=Object(D.Q)(e),n=Object.keys(this.theme.blockColors).find(e=>e===t);let o=void 0;n&&(o=n.includes("background")?"background":"color");const i=o&&n?this.theme.blockColors[n][o]:void 0;return i?Object(L.m)(i):void 0}handleInsert(){this.props.stores.store.update(e=>({...e,isInsertOpen:!0})),B.v(this.environment,"insert")}handleTurnInto(){this.props.stores.store.update(e=>({...e,isTurnIntoOpen:!0})),B.v(this.environment,"turn_into")}handleTemplate(){this.props.stores.store.update(e=>({...e,isTemplatesOpen:!0})),B.v(this.environment,"templates")}handleTextColor(){this.props.stores.store.update(e=>({...e,isColorOpen:!0})),B.v(this.environment,"color")}setCurrentMenuType(e,t){var n;null===(n=this.environment.NativeMobileActionBarStore)||void 0===n||n.update(n=>({...n,menuType:e,shouldRestoreSelectionForMenu:t}))}setCurrentSubMenuType(e){var t;null===(t=this.environment.NativeMobileActionBarStore)||void 0===t||t.update(t=>({...t,isSubMenuOverridden:!0,subMenuType:e,menuType:null,shouldRestoreSelectionForMenu:!0}))}}t.default=Object(u.injectIntl)(X)},sgAB:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("pVnL"),r=n.n(s),a=n("lSNA"),l=n.n(a),d=(n("3bBZ"),n("q1tI")),c=n.n(d),h=n("y6Dp"),u=n("BJyN"),p=n("LEzx");class m extends p.a{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}var b=m,g=n("VOS9"),v=n("gbGO"),S=n("wldR"),y=n("2HDO"),f=n("F9et"),k=n("ikHm"),M=n("wXH4"),w=n("sjR4"),T=n("DNgp"),C=n("Iece"),I=n("6nbh"),B=n("J9+s"),P=n("RQ1t"),A=n("WgIs"),x=n("rro+"),R=n("ui+/"),O=n("bVDK"),F=n("30UQ"),j=n("nM47"),D=n("2Y+N"),N=n("nPEg"),q=n("3Z0Q");class L extends S.a{constructor(...e){super(...e),l()(this,"storeTypes",{store:b,ignoreSelectionAreaStore:I.a,templatePickerMenuListStore:P.a}),l()(this,"renderMobileTemplatePreviewItem",e=>({key:e.name,render:t=>c.a.createElement(O.a,r()({},t,{key:e.name,title:e.name,type:"page_template",format:"phone-modal",emoji:e.emoji,locked:!1})),action:()=>{F.i({environment:this.environment,item:e,createNewPage:!1,isPrivate:!1})}})),l()(this,"renderPageTemplatePickerItem",e=>{const t=this.props.currentBlockStore;return{key:e.name,render:t=>c.a.createElement(O.a,r()({},t,{key:e.name,format:"phone-modal",title:e.name,type:e.type,icon:e.icon,locked:!1})),action:n=>{t&&Object(j.j)(this.environment)&&(h.ve(this.environment,{name:e.name,is_keyboard:"keydown"===n.event.type}),e.onClick(this.environment,t))}}}),l()(this,"handleCloseColorPopup",()=>{this.stores.store.setState({...this.stores.store.state,isColorOpen:!1})}),l()(this,"handleCloseInsertPopup",()=>{this.stores.store.setState({...this.stores.store.state,isInsertOpen:!1})}),l()(this,"handleCloseTurnIntoPopup",()=>{this.stores.store.setState({...this.stores.store.state,isTurnIntoOpen:!1})}),l()(this,"handleCloseTemplatesPopup",()=>{this.stores.store.setState({...this.stores.store.state,isTemplatesOpen:!1})}),l()(this,"listenForPositionChanges",this.createComputedStore(()=>{const e=T.default.state;return"editing"===e.mode?{scrollTop:C.a.state.scrollTop,editing:!0,store:e.store.id,selection:e.selection.endIndex}:{scrollTop:C.a.state.scrollTop,editing:!1}})),l()(this,"shouldShow",this.createComputedStore(()=>{var e;return q.r(this.environment,this.stores.ignoreSelectionAreaStore,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)}))}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,n=this.isOpen(),{makeActionBarComponent:o}=this.props;return i()(d.Fragment,{},void 0,i()(f.a,{capture:!0,render:e=>c.a.createElement("div",r()({},e,{style:{position:"relative",width:"100%",height:0,zIndex:k.j}}),o(this.stores),this.renderNativeMenuIgnoreSelectionArea(),this.renderInsertPopup(),this.renderTurnIntoPopup(),this.renderColorPopup(),this.renderTemplatesPopup())}),!n&&e.isIPhoneX&&e.isNative&&i()("div",{style:{position:"absolute",bottom:0,background:"transparent",height:t.state.paddingBottomCSS,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}}))}renderNativeMenuIgnoreSelectionArea(){const e=this.environment.NativeMobileActionBarStore;return e?i()(y.a,{store:this.stores.ignoreSelectionAreaStore,capture:null!==e.state.menuType,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:"editing"!==T.default.state.mode&&e.state.shouldRestoreSelectionForMenu,render:e=>null}):null}renderInsertPopup(){const{device:e}=this.environment;return i()(y.a,{capture:this.stores.store.state.isInsertOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!1,render:t=>i()(M.c,{popupType:e.isMobile?M.c.PopupType.SlideUp:M.c.PopupType.Popup,preventBlockRenderQueueOnEnter:!0,open:this.stores.store.state.isInsertOpen,keepFocus:!0,onDismiss:()=>{t(),this.handleCloseInsertPopup()},render:()=>i()(v.b,{menuType:v.b.MenuType.Modal,title:i()(B.FormattedMessage,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:i()(N.CancelMenuText,{}),onClickRight:()=>{t(),this.handleCloseInsertPopup()}},void 0,i()(g.a,{sections:u.h,context:{environment:this.environment,blocks:w.default.state.stores},onAccept:this.handleCloseInsertPopup}))})})}renderTurnIntoPopup(){const{device:e}=this.environment;return i()(y.a,{capture:this.stores.store.state.isTurnIntoOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!0,render:()=>i()(M.c,{popupType:e.isMobile?M.c.PopupType.SlideUp:M.c.PopupType.Popup,open:this.stores.store.state.isTurnIntoOpen,keepFocus:!0,onDismiss:this.handleCloseTurnIntoPopup,preventBlockRenderQueueOnEnter:!0,render:()=>i()(v.b,{menuType:v.b.MenuType.Modal,title:i()(B.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:i()(N.CancelMenuText,{}),onClickRight:this.handleCloseTurnIntoPopup},void 0,i()(g.a,{sections:[{...u.r,title:""}],context:{environment:this.environment,blocks:w.default.state.stores},onAccept:this.handleCloseTurnIntoPopup}))})})}renderColorPopup(){const{device:e}=this.environment;return i()(y.a,{capture:this.stores.store.state.isColorOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!0,render:()=>i()(M.c,{popupType:e.isMobile?M.c.PopupType.SlideUp:M.c.PopupType.Popup,open:this.stores.store.state.isColorOpen,keepFocus:!0,onDismiss:this.handleCloseColorPopup,preventBlockRenderQueueOnEnter:!0,render:()=>i()(v.b,{menuType:v.b.MenuType.Modal,title:i()(B.FormattedMessage,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:i()(N.CancelMenuText,{}),onClickRight:this.handleCloseColorPopup},void 0,i()(g.a,{sections:[u.p,u.o,u.b],context:{environment:this.environment,blocks:w.default.state.stores},onAccept:this.handleCloseColorPopup}))})})}renderTemplatesPopup(){const{device:e}=this.environment;return i()(y.a,{capture:this.stores.store.state.isTemplatesOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!1,render:()=>i()(M.c,{popupType:e.isMobile?M.c.PopupType.SlideUp:M.c.PopupType.Popup,open:this.stores.store.state.isTemplatesOpen,keepFocus:!0,render:()=>i()(v.b,{menuType:v.b.MenuType.Modal,title:i()(B.FormattedMessage,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:i()(N.CancelMenuText,{}),onClickRight:this.handleCloseTemplatesPopup},void 0,i()(A.a,{type:A.a.Type.Vertical,store:this.stores.templatePickerMenuListStore,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onAccept:this.handleCloseTemplatesPopup,sections:[{key:"Basic",render:e=>i()(D.a,{},void 0,e.children),items:x.e.map(this.renderPageTemplatePickerItem)},{key:"Database",render:e=>i()(D.a,{title:i()(B.FormattedMessage,{defaultMessage:"Database",id:"mobileActionBar.databaseSection.title"})},void 0,e.children),items:x.a.filter(e=>e.shouldShow(this.environment)).map(this.renderPageTemplatePickerItem)},...R.b(this.environment,this.props.intl).map(e=>({key:e.name,render:t=>i()(D.a,{title:e.name},e.name,t.children),items:e.items.map(this.renderMobileTemplatePreviewItem)}))]}))})})}isOpen(){const{device:e}=this.environment;return e.isMobileBrowser?this.stores.store.state.isOpen:this.shouldShow.state}}t.default=Object(B.injectIntl)(L)},tCjx:function(e,t,n){"use strict";n.r(t);var o=n("gcR/"),i=n.n(o),s=n("lSNA"),r=n.n(s),a=(n("3bBZ"),n("q1tI")),l=n("wldR"),d=n("MeYt"),c=n("FcJC"),h=n("mF3+"),u=n("QcDD"),p=n("ikHm"),m=n("4aFz"),b=n("id5p"),g=n("y6Dp"),v=n("CaJT"),S=n("HTFi");class y extends l.a{constructor(...e){super(...e),r()(this,"handleClickFind",()=>{m.c({environment:this.environment,analyticsFrom:"mobile-bottom-bar"}),g.Pe(this.environment,{itemName:"search"})}),r()(this,"handleClickQuickAdd",()=>{c.quickAddPage({environment:this.environment,from:"mobile_bottom_bar"}),g.Pe(this.environment,{itemName:"add_page"})}),r()(this,"handleUndo",()=>{v.f(this.environment,!0),g.Pe(this.environment,{itemName:"undo"})}),r()(this,"handleRedo",()=>{v.e(this.environment,!0),g.Pe(this.environment,{itemName:"redo"})}),r()(this,"canQuickAdd",this.createComputedStore(()=>Boolean(u.default.state.currentSpaceStore&&u.default.state.currentSpaceStore.canEdit())))}renderComponent(){const e=S.a.state;if(e){const{isTablet:t}=this.environment.device;return i()("div",{style:this.getWrapStyle(e)},void 0,t?this.renderTabletButtons():this.renderPhoneButtons())}}renderPhoneButtons(){return i()(a.Fragment,{},void 0,this.renderSearchButton(),this.renderUpdatesButton(),this.renderQuickAddPageButton())}renderTabletButtons(){return i()(a.Fragment,{},void 0,this.renderSearchButton(),this.renderUpdatesButton(),this.renderQuickAddPageButton(),this.renderUndoRedoButtons())}renderSearchButton(){return i()(d.a,{style:this.getSearchButtonStyle(),onClick:this.handleClickFind,mobileFeedback:!0},void 0,h.a.mobileBottomBarSearch(this.getIconStyle()))}renderUpdatesButton(){const{isTablet:e}=this.environment.device;return i()(b.a,{format:e?b.a.Format.MobileBottomBarTablet:b.a.Format.MobileBottomBarPhone})}renderQuickAddPageButton(){return i()(d.a,{style:this.getQuickAddButtonStyle(),onClick:this.handleClickQuickAdd,mobileFeedback:!0,disabled:!this.canQuickAdd.state,disabledFeedback:!0},void 0,h.a.mobileBottomBarAddPage(this.getIconStyle()))}renderUndoRedoButtons(){return i()(a.Fragment,{},void 0,i()(d.a,{style:this.getUndoButtonStyle(),onClick:this.handleUndo,mobileFeedback:!0,disabled:!v.b(),disabledFeedback:!0},void 0,h.a.mobileBottomBarUndo(this.getIconStyle())),i()(d.a,{style:this.getRedoButtonStyle(),onClick:this.handleRedo,mobileFeedback:!0,disabled:!v.a(),disabledFeedback:!0},void 0,h.a.mobileBottomBarRedo(this.getIconStyle())))}getWrapStyle(e){const{WindowSizeStore:t}=this.environment,{isTablet:n}=this.environment.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:t.getSafePaddingBottomCSS(y.height),paddingBottom:t.state.paddingBottomCSS,background:this.theme.contentBackground,borderTop:"1px ".concat(this.theme.darkDividerColor," solid"),zIndex:p.k,opacity:e?1:0,pointerEvents:e?"auto":"none",cursor:"pointer"}}getSearchButtonStyle(){const{WindowSizeStore:e}=this.environment,{isTablet:t}=this.environment.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:e.getSafePaddingLeftCSS(18),...t&&{flex:"none",paddingLeft:2,width:y.tabletButtonWidth,justifyContent:"center"}}}getQuickAddButtonStyle(){const{WindowSizeStore:e}=this.environment,{isTablet:t}=this.environment.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:e.getSafePaddingRightCSS(18),...t&&{justifyContent:"center",flex:"none",paddingRight:0,width:y.tabletButtonWidth,marginRight:"auto"}}}getUndoButtonStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:e.getSafePaddingLeftCSS(18),width:y.tabletButtonWidth}}getRedoButtonStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:y.tabletButtonWidth,paddingRight:4}}getIconStyle(){return{width:26,fill:this.theme.regularTextColor}}}r()(y,"height",44),r()(y,"tabletButtonWidth",54),t.default=y}}]);