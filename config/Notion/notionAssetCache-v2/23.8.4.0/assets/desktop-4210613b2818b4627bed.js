(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3Tmf":function(e,t,a){"use strict";a.r(t),a.d(t,"PushNotification",(function(){return p}));a("4Brf");var o=a("NNnf"),c=a("6SEd"),r=a("LvDl"),s=a.n(r),l=a("kaWB"),i=a("V1wX"),n=a("NoAG"),d=a("njgS"),m=a("AvkE"),u=a("GJWe"),b=a("cBa6");function p(e){const{activity:t,getRecordValue:a,baseURL:r,userTimeZone:p,intl:f}=e,g=Object(o.b)({...e}),k=Object(o.a)(g,f),N=Object(o.g)({...e,intl:f}),y=Object(o.c)({...e,intl:f}),_=Object(o.f)({...e,intl:f});switch(t.type){case"top-level-block-created":return{subject:f.formatMessage(o.h.topLevelBlockCreated,{userName:k,targetName:N,spaceName:_})};case"top-level-block-deleted":return{subject:f.formatMessage(o.h.topLevelBlockDeleted,{userName:k,targetName:N,spaceName:_})};case"collection-row-created":return{subject:f.formatMessage(o.h.collectionRowCreated,{userName:k,targetName:N,collectionName:y})};case"collection-row-deleted":return{subject:f.formatMessage(o.h.collectionRowDeleted,{userName:k,targetName:N,collectionName:y})};case"block-edited":{let l;if(t.edits){const i=t.edits[0];if("block-changed"===i.type){const t=i.block_data.after.block_value;if("page"===t.type&&t.parent_table===c.a){const t=i.block_schema||d.g(f),c=m.g({before:i.block_data.before.block_value,after:i.block_data.after.block_value,schema:t}).filter(e=>{const a=t[e];return a&&"formula"!==a.type}).map(c=>{const r=t[c],s=r?r.name:void 0,l=Object(o.n)({intl:f,property:c,schema:t,block:i.block_data.after.block_value,getRecordValue:a,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||f.formatMessage(o.h.emptyBlockEditedProperty);return f.formatMessage(o.h.propertyNameAndValueEdited,{propertyName:s,propertyValue:l})}),r=m.h({before:i.block_data.before.block_value,after:i.block_data.after.block_value}),n=s.a.compact(r.map(e=>{const t=Object(o.k)({formatProperty:e,intl:f}),c=Object(o.j)({formatProperty:e,intl:f,block:i.block_data.after.block_value,getRecordValue:a});if(t&&c)return f.formatMessage(o.h.propertyNameAndValueEdited,{propertyName:t,propertyValue:c})}));l=f.formatList(c.concat(n),{type:"conjunction",style:"narrow"})}else l=Object(o.i)({intl:f,blockValue:t,getRecordValue:a,baseURL:r,userTimeZone:p})}else if("block-created"===i.type){const e=i.block_data.block_value;l=Object(o.i)({intl:f,blockValue:e,getRecordValue:a,baseURL:r,userTimeZone:p})}else if("block-deleted"===i.type){const e=i.block_data.block_value,t=Object(o.i)({intl:f,blockValue:e,getRecordValue:a,baseURL:r,userTimeZone:p});l=f.formatMessage(o.h.blockDeletedEditBody,{renderedBlock:t})}}return{subject:f.formatMessage(o.h.blockEditedNotification,{userName:k,blockName:N}),body:l}}case"permissions-edited":return{subject:f.formatMessage(o.h.userEditedPermissionsFor,{userName:k,targetName:N}),body:Object(o.m)({intl:f,activity:t,getRecordValue:a,userTimeZone:e.userTimeZone})};case"user-mentioned":return{subject:f.formatMessage(o.h.userMentionedIn,{userName:k,targetName:N}),body:Object(o.o)({intl:f,getRecordValue:a,baseURL:r,userTimeZone:e.userTimeZone,blockId:t.mentioned_block_id,property:t.mentioned_property})};case"commented":{let c;if(t.edits){const r=t.edits[0];if("comment-created"===r.type){const t=a({table:l.a,id:r.comment_id,spaceId:r.space_id}),o=r.comment_data||t;o&&(c="ðŸ’¬ ".concat(u.k({intl:f,textValue:o.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone})))}else if("comment-changed"===r.type)c="ðŸ’¬ ".concat(u.k({intl:f,textValue:r.comment_data.after.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone}));else{const t=a({table:l.a,id:r.comment_id,spaceId:r.space_id}),s=r.comment_data||t;if(s){const t=u.k({intl:f,textValue:s.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone});c=f.formatMessage(o.h.userDeletedComment,{commentText:t})}}}return{subject:f.formatMessage(o.h.userCommentedSubject,{userName:k,targetName:N}),body:c}}case"user-invited":if(t.permission_group_id)return{subject:f.formatMessage(o.h.userAddedToSpace,{userName:k,workspaceName:N})};return{subject:0===g.filter(i.f).length?f.formatMessage(o.h.userInvitedToSpaceByBot,{workspaceName:N}):f.formatMessage(o.h.userInvitedToSpace,{userName:k,workspaceName:N})};case"collection-edited":{let e,a=f.formatMessage(o.h.userEditedCollectionSubject,{userName:k,collectionName:N});if(t.edits){const c=t.edits[0];if("collection-changed"===c.type&&c.collection_data){const t=c.collection_data.after?c.collection_data.after.description:void 0,r=c.collection_data.before?c.collection_data.before.description:void 0;r&&!t?a=f.formatMessage(o.h.collectionDescriptionDeleted,{userName:k,collectionName:N}):!r&&t?(a=f.formatMessage(o.h.collectionDescriptionCreated,{userName:k,collectionName:N}),e=b.eb(t)):r&&t&&m.n(r,t)&&(e=b.eb(t))}else if("collection-created"===c.type&&c.collection_data){const t=c.collection_data.description;t&&(a=f.formatMessage(o.h.userCreatedCollectionSubject,{userName:k,collectionName:N}),e=b.eb(t))}}return{subject:a,body:e}}case"collection-view-edited":const j=e.getRecordValue({table:n.a,id:t.collection_view_id}),h=j&&j.name||f.formatMessage(o.h.untitledCollectionView);return{subject:f.formatMessage(o.h.collectionViewEditedSubject,{userName:k,collectionViewName:h,collectionName:N})};case"collection-property-edited":const v=t.edits&&t.edits[0],M=v&&("collection-property-changed"===v.type?v.collection_property_data.after.name:v.collection_property_data.name)||f.formatMessage(o.h.collectionPropertyEditedUnknown);return t.collection_property_id,{subject:f.formatMessage(o.h.collectionPropertyEditedSubject,{userName:k,propertyType:M,collectionName:N})};case"reminder":return{subject:f.formatMessage(o.h.reminderSubject,{pageName:N}),body:Object(o.o)({getRecordValue:a,baseURL:r,userTimeZone:e.userTimeZone,blockId:t.reminder_block_id,property:t.reminder_property,intl:f})};case"permission-group-edited":return{subject:Object(o.l)({activity:t,intl:f,userName:k,targetName:N})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===t.type?f.formatMessage(o.h.pageLockedActivity,{userName:k,pageName:N}):f.formatMessage(o.h.pageUnlockedActivity,{userName:k,pageName:N})};case"email-edited":return{subject:f.formatMessage(o.h.emailEditedActivity,{userName:k})};case"access-requested":return{subject:f.formatMessage(o.h.accessRequestedSubject,{userName:k,pageName:N})}}}}}]);